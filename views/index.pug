extends layout

block content
  //- Search form
  form(method="GET", action="/books")
    input(type="text", name="search", placeholder="Search books...", value=search)
    input(type="submit", value="Search")

  h2 Book List
  if books && books.length
    table
      thead
        tr
          th Title
          th Author
          th Genre
          th Year
          th Actions
      tbody
        each book in books
          tr
            td #{book.title}
            td #{book.author}
            td #{book.genre}
            td #{book.year}
            td
              a(href=`/books/${book.id}`) Edit
              form(method="POST", action=`/books/${book.id}/delete`, style="display:inline")
                input(type="submit", value="Delete")
  else
    p No books yet.

  //- Pagination
  if totalPages && totalPages > 1
    nav.pagination
      if currentPage > 1
        a(href=`/books?search=${search}&page=${currentPage - 1}`) Previous
      | Page #{currentPage} of #{totalPages} 
      if currentPage < totalPages
        a(href=`/books?search=${search}&page=${currentPage + 1}`) Next
